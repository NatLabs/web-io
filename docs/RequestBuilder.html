<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="ArrayMap.html">ArrayMap</a></li></li><li><li><a href="File.html">File</a></li></li><li><li><a href="Form/Parser.html">Form/Parser</a></li></li><li><li><a href="Form/SlowParser.html">Form/SlowParser</a></li></li><li><li><a href="Form/lib.html">Form/lib</a></li></li><li><li><a href="Headers.html">Headers</a></li></li><li><li><a href="Request.html">Request</a></li></li><li><li><a href="RequestBuilder.html">RequestBuilder</a></li></li><li><li><a href="Response.html">Response</a></li></li><li><li><a href="ResponseBuilder.html">ResponseBuilder</a></li></li><li><li><a href="Router.html">Router</a></li></li><li><li><a href="Types.html">Types</a></li></li><li><li><a href="URL.html">URL</a></li></li><li><li><a href="UrlEncoding.html">UrlEncoding</a></li></li><li><li><a href="Utils.html">Utils</a></li></li><li><li><a href="lib.html">lib</a></li></li><li><li><a href="outcall.html">outcall</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.MutableInternalState">MutableInternalState</a></li></li><li><li><a href="#type.InternalState">InternalState</a></li></li><li><li><a href="#type.RequestBuilderChainingInterface">RequestBuilderChainingInterface</a></li></li><li><li><a href="#type.RequestBuilderInterface">RequestBuilderInterface</a></li></li><li><li><a href="#type.RequestBuilder">RequestBuilder</a></li></li></ul></nav><div class="documentation"><h1>RequestBuilder</h1><p>A request builder for making HTTP requests.</p>
<div class="declaration"><h4 class="type-declaration" id="type.MutableInternalState"><span class="keyword">type </span><span class="type">MutableInternalState</span> = { <span class="keyword">var </span>url : <a href="URL.html#type.URL"><span class="type">URL.URL</span></a>; <span class="keyword">var </span>method : <span class="type">Text</span>; <span class="keyword">var </span>headers : <a href="Headers.html#type.Headers"><span class="type">Headers.Headers</span></a>; <span class="keyword">var </span>caller : <span class="type">Principal</span>; <span class="keyword">var </span>transform : ?<a href="Types.html#type.TransformContext"><span class="type">T.TransformContext</span></a>; <span class="keyword">var </span>body : <span class="type">Blob</span>; <span class="keyword">var </span>max_redirects : <span class="type">Nat</span>; <span class="keyword">var </span>form : <a href="Form.html#type.Form"><span class="type">Form.Form</span></a>; <span class="keyword">var </span>cycles : <span class="type">Nat</span>; <span class="keyword">var </span>max_response_bytes : <span class="type">Nat64</span> }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.InternalState"><span class="keyword">type </span><span class="type">InternalState</span> = { url : <a href="URL.html#type.URL"><span class="type">URL.URL</span></a>; method : <span class="type">Text</span>; headers : <a href="Headers.html#type.Headers"><span class="type">Headers.Headers</span></a>; caller : <span class="type">Principal</span>; transform : ?<a href="Types.html#type.TransformContext"><span class="type">T.TransformContext</span></a>; body : <span class="type">Blob</span>; max_redirects : <span class="type">Nat</span>; form : <a href="Form.html#type.Form"><span class="type">Form.Form</span></a>; cycles : <span class="type">Nat</span>; max_response_bytes : <span class="type">Nat64</span> }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.RequestBuilderChainingInterface"><span class="keyword">type </span><span class="type">RequestBuilderChainingInterface</span>&lt;<span class="type">Builder</span>&gt; = { add_query : (<span class="type">Text</span>, <span class="type">Text</span>) -&gt; <span class="type">Builder</span>; auth : (<span class="type">Text</span>, <span class="type">Text</span>) -&gt; <span class="type">Builder</span>; bearer_token : <span class="type">Text</span> -&gt; <span class="type">Builder</span>; blob : <span class="type">Blob</span> -&gt; <span class="type">Builder</span>; caller : <span class="type">Principal</span> -&gt; <span class="type">Builder</span>; cookie : (<span class="type">Text</span>, <span class="type">Text</span>) -&gt; <span class="type">Builder</span>; cycles : <span class="type">Nat</span> -&gt; <span class="type">Builder</span>; file : (<span class="type">Text</span>, <a href="#type.File"><span class="type">File</span></a>) -&gt; <span class="type">Builder</span>; files : [(<span class="type">Text</span>, <a href="#type.File"><span class="type">File</span></a>)] -&gt; <span class="type">Builder</span>; form_field : (<span class="type">Text</span>, <span class="type">Text</span>) -&gt; <span class="type">Builder</span>; form_fields : [(<span class="type">Text</span>, <span class="type">Text</span>)] -&gt; <span class="type">Builder</span>; header : (<span class="type">Text</span>, <span class="type">Text</span>) -&gt; <span class="type">Builder</span>; headers : [<a href="Types.html#type.HeaderField"><span class="type">T.HeaderField</span></a>] -&gt; <span class="type">Builder</span>; html : <span class="type">Text</span> -&gt; <span class="type">Builder</span>; json : (<span class="type">Blob</span>, [<span class="type">Text</span>]) -&gt; <span class="type">Builder</span>; max_bytes : <span class="type">Nat64</span> -&gt; <span class="type">Builder</span>; max_redirects : <span class="type">Nat</span> -&gt; <span class="type">Builder</span>; method : <span class="type">Text</span> -&gt; <span class="type">Builder</span>; queries : [(<span class="type">Text</span>, <span class="type">Text</span>)] -&gt; <span class="type">Builder</span>; text : <span class="type">Text</span> -&gt; <span class="type">Builder</span>; transform : ?<a href="Types.html#type.TransformContext"><span class="type">T.TransformContext</span></a> -&gt; <span class="type">Builder</span> }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.RequestBuilderInterface"><span class="keyword">type </span><span class="type">RequestBuilderInterface</span>&lt;<span class="type">RequestBuilderClass</span>&gt; = <a href="#type.RequestBuilderChainingInterface"><span class="type">RequestBuilderChainingInterface</span></a>&lt;<span class="type">RequestBuilderClass</span>&gt; and { build : () -&gt; <a href="Request.html#type.Request"><span class="type">Request.Request</span></a>; build_canister_http : () -&gt; <a href="Types.html#type.CanisterHttpRequest"><span class="type">T.CanisterHttpRequest</span></a>; build_http : () -&gt; <a href="Types.html#type.HttpRequest"><span class="type">T.HttpRequest</span></a> }</h4><p></p></div><div class="declaration"><h4 class="class-declaration" id="type.RequestBuilder"><span class="keyword">class </span><span class="classname">RequestBuilder</span>(<span class="parameter">url_text</span> : <span class="type">Text</span>)</h4><div class="declaration"><h4 class="function" id="RequestBuilder.get_state"><code><span class="keyword">public func </span><span class="fnname">get_state</span>() : <a href="#type.InternalState"><span class="type">InternalState</span></a></code></h4><p><p>Returns the current state of the request builder.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder._get_mut_state"><code><span class="keyword">public func </span><span class="fnname">_get_mut_state</span>() : <a href="#type.MutableInternalState"><span class="type">MutableInternalState</span></a></code></h4><p></p></div><div class="declaration"><h4 class="function" id="RequestBuilder.add_query"><code><span class="keyword">public func </span><span class="fnname">add_query</span>(<span class="parameter">key</span> : <span class="type">Text</span>, <span class="parameter">val</span> : <span class="type">Text</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Adds a query parameter to the request.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.queries"><code><span class="keyword">public func </span><span class="fnname">queries</span>(<span class="parameter">entries</span> : [(<span class="type">Text</span>, <span class="type">Text</span>)]) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Adds multiple query parameters to the request.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.method"><code><span class="keyword">public func </span><span class="fnname">method</span>(<span class="parameter">text</span> : <span class="type">Text</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Sets the request method.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.header"><code><span class="keyword">public func </span><span class="fnname">header</span>(<span class="parameter">key</span> : <span class="type">Text</span>, <span class="parameter">val</span> : <span class="type">Text</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Adds a header field to the request.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.headers"><code><span class="keyword">public func </span><span class="fnname">headers</span>(<span class="parameter">entries</span> : [<a href="Types.html#type.HeaderField"><span class="type">T.HeaderField</span></a>]) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Adds multiple header fields to the request.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.max_bytes"><code><span class="keyword">public func </span><span class="fnname">max_bytes</span>(<span class="parameter">n</span> : <span class="type">Nat64</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Sets the maximum bytes that can be returned in the response.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.cycles"><code><span class="keyword">public func </span><span class="fnname">cycles</span>(<span class="parameter">n</span> : <span class="type">Nat</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Sets the maximum amount of cycles that can be spent on the request.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.caller"><code><span class="keyword">public func </span><span class="fnname">caller</span>(<span class="parameter">p</span> : <span class="type">Principal</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Sets the caller that initiated the request.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.blob"><code><span class="keyword">public func </span><span class="fnname">blob</span>(<span class="parameter">blob</span> : <span class="type">Blob</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Sets the request body to the given blob.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.text"><code><span class="keyword">public func </span><span class="fnname">text</span>(<span class="parameter">text</span> : <span class="type">Text</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Sets the request body to the given text.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.json"><code><span class="keyword">public func </span><span class="fnname">json</span>(<span class="parameter">candid</span> : <span class="type">Blob</span>, <span class="parameter">keys</span> : [<span class="type">Text</span>]) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Sets the request body to the given JSON blob.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.html"><code><span class="keyword">public func </span><span class="fnname">html</span>(<span class="parameter">html</span> : <span class="type">Text</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Sets the request body to the given HTML text.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.form_field"><code><span class="keyword">public func </span><span class="fnname">form_field</span>(<span class="parameter">key</span> : <span class="type">Text</span>, <span class="parameter">val</span> : <span class="type">Text</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Adds a form field to the request.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.form_fields"><code><span class="keyword">public func </span><span class="fnname">form_fields</span>(<span class="parameter">entries</span> : [(<span class="type">Text</span>, <span class="type">Text</span>)]) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Adds multiple form fields to the request.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.file"><code><span class="keyword">public func </span><span class="fnname">file</span>(<span class="parameter">key</span> : <span class="type">Text</span>, <span class="parameter">File</span> : <a href="File.html#type.File"><span class="type">File.File</span></a>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Adds a file to the request.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.files"><code><span class="keyword">public func </span><span class="fnname">files</span>(<span class="parameter">entries</span> : [(<span class="type">Text</span>, <a href="File.html#type.File"><span class="type">File.File</span></a>)]) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Adds multiple files to the request.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.transform"><code><span class="keyword">public func </span><span class="fnname">transform</span>(<span class="parameter">tc</span> : ?<a href="Types.html#type.TransformContext"><span class="type">T.TransformContext</span></a>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p></p></div><div class="declaration"><h4 class="function" id="RequestBuilder.auth"><code><span class="keyword">public func </span><span class="fnname">auth</span>(<span class="parameter">username</span> : <span class="type">Text</span>, <span class="parameter">password</span> : <span class="type">Text</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Sets the 'Authorization' header field using Basic Auth.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.bearer_token"><code><span class="keyword">public func </span><span class="fnname">bearer_token</span>(<span class="parameter">token</span> : <span class="type">Text</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Sets the 'Authorization' header field with the given Bearer token.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.cookie"><code><span class="keyword">public func </span><span class="fnname">cookie</span>(<span class="parameter">name</span> : <span class="type">Text</span>, <span class="parameter">value</span> : <span class="type">Text</span>) : <a href="#type.RequestBuilder"><span class="type">RequestBuilder</span></a></code></h4><p><p>Sets the 'Cookie' header field with the given name and value.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.build"><code><span class="keyword">public func </span><span class="fnname">build</span>() : <a href="Request.html#type.Request"><span class="type">Request.Request</span></a></code></h4><p><p>Returns a Request object with helper functions for accessing the response data.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.build_http"><code><span class="keyword">public func </span><span class="fnname">build_http</span>() : <a href="Types.html#type.HttpRequest"><span class="type">T.HttpRequest</span></a></code></h4><p><p>Builds a <code>HttpRequest</code> record that is returned in the <code>http_request</code> and <code>http_request_update</code> functions.</p>
</p></div><div class="declaration"><h4 class="function" id="RequestBuilder.build_canister_http"><code><span class="keyword">public func </span><span class="fnname">build_canister_http</span>() : <a href="Types.html#type.CanisterHttpRequest"><span class="type">T.CanisterHttpRequest</span></a></code></h4><p><p>Builds a <code>CanisterHttpRequest</code> record that is returned after making an outcall.</p>
</p></div><p><p>A request builder for making HTTP requests.</p>
<p>The request builder is used to construct a request, which can then be
sent using the <code>send_request()</code> method.</p>
</p></div></div></body></html>