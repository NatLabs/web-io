<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="ArrayMap.html">ArrayMap</a></li></li><li><li><a href="File.html">File</a></li></li><li><li><a href="Form/Parser.html">Form/Parser</a></li></li><li><li><a href="Form/SlowParser.html">Form/SlowParser</a></li></li><li><li><a href="Form/lib.html">Form/lib</a></li></li><li><li><a href="Headers.html">Headers</a></li></li><li><li><a href="Request.html">Request</a></li></li><li><li><a href="RequestBuilder.html">RequestBuilder</a></li></li><li><li><a href="Response.html">Response</a></li></li><li><li><a href="ResponseBuilder.html">ResponseBuilder</a></li></li><li><li><a href="Router.html">Router</a></li></li><li><li><a href="Types.html">Types</a></li></li><li><li><a href="URL.html">URL</a></li></li><li><li><a href="UrlEncoding.html">UrlEncoding</a></li></li><li><li><a href="Utils.html">Utils</a></li></li><li><li><a href="outcall.html">outcall</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.FileData">FileData</a></li></li><li><li><a href="#type.File">File</a></li></li><li><li><a href="#fromBytes">fromBytes</a></li></li><li><li><a href="#fromChunks">fromChunks</a></li></li><li><li><a href="#getChunk">getChunk</a></li></li><li><li><a href="#chunks">chunks</a></li></li><li><li><a href="#toText">toText</a></li></li></ul></nav><div class="documentation"><h1>File</h1><p>Module for representing files</p>
<div class="declaration"><h4 class="type-declaration" id="type.FileData"><span class="keyword">type </span><span class="type">FileData</span> = { filename : <span class="type">Text</span>; content_type : <span class="type">Text</span>; mtime : ?<span class="type">Time.Time</span> }</h4><p><p>Required arguements for initializing a <code>File</code></p>
</p></div><div class="declaration"><h4 class="class-declaration" id="type.File"><span class="keyword">class </span><span class="classname">File</span>(<br/>  <span class="parameter">_filename</span> : <span class="type">Text</span>, <br/>  <span class="parameter">_content_type</span> : <span class="type">Text</span>, <br/>  <span class="parameter">_mtime</span> : ?<span class="type">Time.Time</span><br/>)</h4><div class="declaration"><h4 class="value-declaration" id="File.filename"><code><span class="keyword">public let </span><span class="fnname">filename</span> : </code></h4><p><p>The name and extention of the file.</p>
</p></div><div class="declaration"><h4 class="value-declaration" id="File.content_type"><code><span class="keyword">public let </span><span class="fnname">content_type</span> : </code></h4><p><p>The MIME type of the file</p>
</p></div><div class="declaration"><h4 class="value-declaration" id="File.mtime"><code><span class="keyword">public let </span><span class="fnname">mtime</span> : </code></h4><p><p>The UTC timestamp of when the file was last modified</p>
</p></div><div class="declaration"><h4 class="value-declaration" id="File.buffer"><code><span class="keyword">public let </span><span class="fnname">buffer</span> : </code></h4><p></p></div><div class="declaration"><h4 class="function" id="File.size"><code><span class="keyword">public func </span><span class="fnname">size</span>() : <span class="type">Nat</span></code></h4><p><p>The number of bytes of the file</p>
</p></div><div class="declaration"><h4 class="function" id="File.content"><code><span class="keyword">public func </span><span class="fnname">content</span>() : <span class="type">Blob</span></code></h4><p><p>Get's the file's data as a Blob</p>
</p></div><div class="declaration"><h4 class="function" id="File.append"><code><span class="keyword">public func </span><span class="fnname">append</span>(<span class="parameter">blob</span> : <span class="type">Blob</span>)</code></h4><p><p>Append a <code>Blob</code> of data to the <code>File</code></p>
</p></div><div class="declaration"><h4 class="function" id="File.slice"><code><span class="keyword">public func </span><span class="fnname">slice</span>(<span class="parameter">start</span> : <span class="type">Nat</span>, <span class="parameter">end</span> : <span class="type">Nat</span>) : <span class="type">Blob</span></code></h4><p><p>Returns a slice of the File's data
specified by the <code>start</code> and <code>end</code> indices</p>
</p></div><p><p>The File class holds the data and metadata of a single file. 
The File class provides the minimum interface required for a file. 
Additional functions are added to the module for manipulating chunked data.</p>
</p></div><div class="declaration"><h4 class="function" id="fromBytes"><code><span class="keyword">public func </span><span class="fnname">fromBytes</span>(<span class="parameter">fileData</span> : <a href="#type.FileData"><span class="type">FileData</span></a>, <span class="parameter">bytes</span> : <a href="#type.Iter"><span class="type">Iter</span></a>&lt;<span class="type">Nat8</span>&gt;) : <a href="#type.File"><span class="type">File</span></a></code></h4><p><p>Creates a file from an byte iterator</p>
</p></div><div class="declaration"><h4 class="function" id="fromChunks"><code><span class="keyword">public func </span><span class="fnname">fromChunks</span>(<span class="parameter">fileData</span> : <a href="#type.FileData"><span class="type">FileData</span></a>, <span class="parameter">chunks</span> : [<span class="type">Blob</span>]) : <a href="#type.File"><span class="type">File</span></a></code></h4><p><p>Creates a file from an array of consecutive blob slices of the file's dataa</p>
</p></div><div class="declaration"><h4 class="function" id="getChunk"><code><span class="keyword">public func </span><span class="fnname">getChunk</span>(<br/>  <span class="parameter">file</span> : <a href="#type.File"><span class="type">File</span></a>, <br/>  <span class="parameter">chunkSize</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">chunkIndex</span> : <span class="type">Nat</span><br/>) : <span class="type">Blob</span></code></h4><p><p>Retrieves a slice of the File's data with the start and end
calculated from the <code>chunkSize</code> and <code>chunkIndex</code></p>
</p></div><div class="declaration"><h4 class="function" id="chunks"><code><span class="keyword">public func </span><span class="fnname">chunks</span>(<span class="parameter">file</span> : <a href="#type.File"><span class="type">File</span></a>, <span class="parameter">chunkSize</span> : <span class="type">Nat</span>) : [<span class="type">Blob</span>]</code></h4><p><p>Returns an Array of Blob slices which are less than or equal to the
given <code>chunkSize</code> and contain consecutive slices of the File's data.</p>
</p></div><div class="declaration"><h4 class="function" id="toText"><code><span class="keyword">public func </span><span class="fnname">toText</span>(<span class="parameter">file</span> : <a href="#type.File"><span class="type">File</span></a>) : ?<span class="type">Text</span></code></h4><p><p>Attemps to convert the File's data to <code>Text</code></p>
<p>It returns <code>null</code> if the File is not <code>utf8</code> encoded</p>
</p></div></div></body></html>