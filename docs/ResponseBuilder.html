<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="ArrayMap.html">ArrayMap</a></li></li><li><li><a href="File.html">File</a></li></li><li><li><a href="Form/Parser.html">Form/Parser</a></li></li><li><li><a href="Form/SlowParser.html">Form/SlowParser</a></li></li><li><li><a href="Form/lib.html">Form/lib</a></li></li><li><li><a href="Headers.html">Headers</a></li></li><li><li><a href="Request.html">Request</a></li></li><li><li><a href="RequestBuilder.html">RequestBuilder</a></li></li><li><li><a href="Response.html">Response</a></li></li><li><li><a href="ResponseBuilder.html">ResponseBuilder</a></li></li><li><li><a href="Router.html">Router</a></li></li><li><li><a href="Types.html">Types</a></li></li><li><li><a href="URL.html">URL</a></li></li><li><li><a href="UrlEncoding.html">UrlEncoding</a></li></li><li><li><a href="Utils.html">Utils</a></li></li><li><li><a href="outcall.html">outcall</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.ResponseBuilder">ResponseBuilder</a></li></li></ul></nav><div class="documentation"><h1>ResponseBuilder</h1><p>A builder for Http Response objects and records</p>
<div class="declaration"><h4 class="class-declaration" id="type.ResponseBuilder"><span class="keyword">class </span><span class="classname">ResponseBuilder</span>()</h4><div class="declaration"><h4 class="function" id="ResponseBuilder.status"><code><span class="keyword">public func </span><span class="fnname">status</span>(<span class="parameter">code</span> : <span class="type">Nat16</span>) : <a href="#type.ResponseBuilder"><span class="type">ResponseBuilder</span></a></code></h4><p><p>Sets the status code of the response.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.update"><code><span class="keyword">public func </span><span class="fnname">update</span>(<span class="parameter">val</span> : <span class="type">Bool</span>) : <a href="#type.ResponseBuilder"><span class="type">ResponseBuilder</span></a></code></h4><p><p>Sets the <code>update</code> flag of the response.
If true, the response will be resent to the <code>http_request_update()</code> function in the canister.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.header"><code><span class="keyword">public func </span><span class="fnname">header</span>(<span class="parameter">key</span> : <span class="type">Text</span>, <span class="parameter">value</span> : <span class="type">Text</span>) : <a href="#type.ResponseBuilder"><span class="type">ResponseBuilder</span></a></code></h4><p><p>Adds a field to the response headers.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.headers"><code><span class="keyword">public func </span><span class="fnname">headers</span>(<span class="parameter">entries</span> : [<a href="Types.html#type.HeaderField"><span class="type">T.HeaderField</span></a>]) : <a href="#type.ResponseBuilder"><span class="type">ResponseBuilder</span></a></code></h4><p><p>Adds multiple fields to the response headers.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.blob"><code><span class="keyword">public func </span><span class="fnname">blob</span>(<span class="parameter">blob</span> : <span class="type">Blob</span>) : <a href="#type.ResponseBuilder"><span class="type">ResponseBuilder</span></a></code></h4><p><p>Sets the response body to the given blob.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.text"><code><span class="keyword">public func </span><span class="fnname">text</span>(<span class="parameter">text</span> : <span class="type">Text</span>) : <a href="#type.ResponseBuilder"><span class="type">ResponseBuilder</span></a></code></h4><p><p>Sets the response body to the given text.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.json"><code><span class="keyword">public func </span><span class="fnname">json</span>(<span class="parameter">json</span> : <span class="type">Blob</span>, <span class="parameter">keys</span> : [<span class="type">Text</span>]) : <a href="#type.ResponseBuilder"><span class="type">ResponseBuilder</span></a></code></h4><p><p>Sets the response body to the given JSON blob.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.html"><code><span class="keyword">public func </span><span class="fnname">html</span>(<span class="parameter">html</span> : <span class="type">Text</span>) : <a href="#type.ResponseBuilder"><span class="type">ResponseBuilder</span></a></code></h4><p><p>Sets the response body to the given HTML text.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.streaming"><code><span class="keyword">public func </span><span class="fnname">streaming</span>(<span class="parameter">callback</span> : <a href="Types.html#type.StreamingCallback"><span class="type">T.StreamingCallback</span></a>, <span class="parameter">init_token</span> : ?<a href="Types.html#type.StreamingToken"><span class="type">T.StreamingToken</span></a>) : <a href="#type.ResponseBuilder"><span class="type">ResponseBuilder</span></a></code></h4><p><p>Sets the canister's streaming strategy for the response.
The <code>callback</code> will be called when the client requests the next chunk of the response.
The <code>init_token</code> is an optional token that will be passed to the <code>callback</code> on the first call.
If <code>init_token</code> is <code>null</code>, the <code>callback</code> will not be called.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.redirect"><code><span class="keyword">public func </span><span class="fnname">redirect</span>(<span class="parameter">url</span> : <span class="type">Text</span>) : <a href="#type.ResponseBuilder"><span class="type">ResponseBuilder</span></a></code></h4><p><p>Sets the <code>url</code> to redirect the client to.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.build"><code><span class="keyword">public func </span><span class="fnname">build</span>() : <a href="Response.html#type.Response"><span class="type">Response.Response</span></a></code></h4><p><p>Returns a <code>Response</code> object.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.build_http"><code><span class="keyword">public func </span><span class="fnname">build_http</span>() : <a href="Types.html#type.HttpResponse"><span class="type">T.HttpResponse</span></a></code></h4><p><p>Returns a <code>HttpResponse</code> record.</p>
</p></div><div class="declaration"><h4 class="function" id="ResponseBuilder.build_canister_http"><code><span class="keyword">public func </span><span class="fnname">build_canister_http</span>() : <a href="Types.html#type.CanisterHttpResponse"><span class="type">T.CanisterHttpResponse</span></a></code></h4><p></p></div><p><p>A builder for Http Response objects and records</p>
<h3 id="Current-Limitations">Current Limitations</h3><ul><li>Unable to set custom token for the streaming strategy.
 Users have to use the default <code>StreamingToken</code> type which consists of a key and a value.</li></ul></p></div></div></body></html>